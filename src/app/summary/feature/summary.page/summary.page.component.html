<div class="text-2xl p-2 font-bold">Summary</div>

<p-messages [(value)]="messages" [enableService]="false" [closable]="true"></p-messages>
<div class="w-full border-solid border-1 surface-border border-round-md bg-black-alpha-40 p-4">
  <div [formGroup]="form" class="flex mb-4  justify-content-between align-items-end">
    <div class="flex gap-2 flex-grow-1  align-items-end">
      <div class="flex flex-column gap-2 p-fluid w-15rem">
        <label htmlFor="view">View</label>
        <p-dropdown formControlName="view" [options]="dateViewOptions" optionLabel="name" optionValue="id" class="w-100"></p-dropdown>
      </div>

      <div class="flex flex-column gap-2 p-fluid w-15rem" *ngIf="form.value.view === 'month'">
        <label htmlFor="view">Month</label>
        <p-dropdown formControlName="monthRange" [options]="monthOptions" optionLabel="name" optionValue="id" class="w-100"></p-dropdown>
      </div>
      <ng-container *ngIf="form.value.view === 'custom'">
        <div class="flex flex-column gap-2 p-fluid w-10rem">
          <label htmlFor="startDate">Date From</label>
          <p-calendar id="startDate" formControlName="startDate" dateFormat="dd-M-yy"></p-calendar>
        </div>
        <div class="flex flex-column gap-2 p-fluid w-10rem">
          <label htmlFor="endDate">Date To</label>
          <p-calendar id="endDate" formControlName="endDate" dateFormat="dd-M-yy"></p-calendar>
        </div>
      </ng-container>
      <p-button icon="pi {{  (filterInProgress) ? 'pi-spin pi-spinner' : 'pi-search' }}"
                pTooltip="Apply filter" styleClass="p-button-rounded " (click)="applyFilter()"></p-button>
      <p-button icon="pi pi-filter-slash" pTooltip="Clear fields" styleClass="p-button-rounded " (click)="clearFilter()"></p-button>
    </div>

    <div class="flex flex-column gap-2 p-fluid w-15rem" >
      <label htmlFor="view">Filter by Categories</label>
      <p-dropdown formControlName="category"  [options]="(categories$ | async) || []" optionLabel="name" optionValue="id" class="w-100"></p-dropdown>
    </div>
  </div>

  <p-chart type="bar" [data]="chartData" [options]="chartOptions"></p-chart>

</div>
