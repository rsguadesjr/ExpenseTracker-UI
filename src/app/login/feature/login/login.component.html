<div class="auth-container">
  <p-card styleClass="bg-black-alpha-40 p-2">

    <ng-template  pTemplate="header">
        <div class="text-4xl py-4 w-full text-center">Expense Tracker</div>
    </ng-template>
    <p-messages [(value)]="messages" [enableService]="false" [closable]="true" ></p-messages>
    <form (ngSubmit)="signInEmailAndPassword()" [formGroup]="form" class="flex flex-column gap-4">
      <div class="flex flex-column gap-2">
        <label htmlFor="login-email">Email</label>
        <input pInputText id="login-email" aria-describedby="Login email" formControlName="email" />
        <small class="text-red-400" *ngFor="let error of validationErrors['email']">{{ error }}</small>
      </div>
      <div class="flex flex-column gap-2">
        <label htmlFor="login-password">Password</label>
        <input pInputText id="login-password" type="password" aria-describedby="login password"
          formControlName="password" />
        <small class="text-red-400" *ngFor="let error of validationErrors['password']">{{ error }}</small>
      </div>
      <div >
        <p-button *ngIf="googleLoginInProgress || emailAndPasswordLoginInProgress; else emailPasswordLogin"
          label="Signing in..." icon="pi pi-spin pi-spinner" styleClass="w-full"></p-button>
        <ng-template #emailPasswordLogin>
          <p-button type="submit" label="Sign In" styleClass="w-full" (click)="signInEmailAndPassword()"></p-button>
        </ng-template>
      </div>
    </form>
    <div class="mt-4 flex justify-content-between">
      <a class="no-underline cursor-pointer" routerLink="/forgot-password">Forgot your password?</a>
      <a class="no-underline cursor-pointer" routerLink="/sign-up">Sign Up</a>
    </div>

    <div class="flex flex-column align-items-center mt-8">
      <span class="mb-4">or sign in with</span>
      <ng-container *ngIf="googleLoginInProgress else googleSignIn">
        <button pButton pRipple label="Login in progress..." icon="pi pi-spin pi-spinner" class="w-full"></button>
      </ng-container>
      <ng-template #googleSignIn>
        <!-- <button pButton pRipple [label]="tabIndex === 0 ? 'Sign in with Google' : 'Sign up with Google'" icon="pi pi-google"  class="w-full" (click)="signInGoogle()"></button> -->
        <p-button icon="pi pi-google" styleClass="p-button-rounded p-button-info" (click)="signInGoogle()"></p-button>
      </ng-template>
    </div>
  </p-card>
</div>
